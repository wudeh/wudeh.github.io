(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{534:function(s,n,e){"use strict";e.r(n);var a=e(3),l=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"弊端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#弊端"}},[s._v("#")]),s._v(" 弊端")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("影响性能（轻微但可优化）\nconsole.log 会占用 内存 和 CPU 资源，尤其是在循环或高频触发的地方（如 mousemove 事件）。\n虽然现代浏览器优化了 console，但大量日志仍可能导致 轻微性能下降。")])])])]),s._v(" "),n("p",[s._v("即使不打开控制台，浏览器依旧会缓存之前的日志输出\n日志输出对性能的影响几乎可以忽略不计，因为这些日志不会被实时渲染到界面上")]),s._v(" "),n("ul",[n("li",[n("ol",{attrs:{start:"2"}},[n("li",[s._v("暴露敏感信息（安全风险）\n可能会 泄露 API 接口、Token、用户数据 等敏感信息，容易被恶意利用。")])])]),s._v(" "),n("li",[n("ol",{attrs:{start:"3"}},[n("li",[s._v("干扰调试（影响开发者体验）\n生产环境日志过多，可能会 掩盖真正的错误信息，增加调试难度。\n开发者可能会误以为某些 console.log 是 预期行为，而忽略真正的 Bug。")])])]),s._v(" "),n("li",[n("ol",{attrs:{start:"4"}},[n("li",[s._v("增加代码体积（影响加载速度）\n即使 console.log 本身很小，但 大量日志 会增加打包后的文件体积，影响 首屏加载速度。")])])])]),s._v(" "),n("h2",{attrs:{id:"移除生产环境的-console-log"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#移除生产环境的-console-log"}},[s._v("#")]),s._v(" 移除生产环境的 console.log")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("使用 Babel 插件")])])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("module.exports = {\n  presets: [\n    '@vue/cli-plugin-babel/preset',\n  ],\n  plugins: [\n    ['@babel/plugin-proposal-optional-chaining'],\n    ...process.env.NODE_ENV === 'production' ? [['transform-remove-console', { exclude: ['info', 'error', 'warn'] }]] : []\n  ]\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[n("p",[s._v("不影响源码，仅在生产环境生效，开发环境保留完整 console。")])]),s._v(" "),n("li",[n("p",[s._v("配置简单直接，适合快速实现基本需求。")])]),s._v(" "),n("li",[n("p",[s._v("依赖 Babel 插件")])]),s._v(" "),n("li",[n("p",[s._v("使用 Terser 压缩时移除（Webpack/Vite 默认支持）")])])]),s._v(" "),n("p",[s._v("在 vite.config.js 或 webpack.config.js 中配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('module.exports = {\n  chainWebpack: (config) => {\n    config.optimization.minimizer("terser").tap((args) => {\n      args[0].terserOptions.compress = {\n        ...args[0].terserOptions.compress,\n        drop_console: true,       // 移除所有 console\n        pure_funcs: ["console.log"], // 只移除 console.log，保留其他\n      };\n      return args;\n    });\n  },\n};\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ul",[n("li",[s._v("不影响源码，仅在生产环境生效，开发环境保留完整 console。")]),s._v(" "),n("li",[s._v("避免 Babel 插件兼容性问题")]),s._v(" "),n("li",[s._v("需要额外配置")])])])}),[],!1,null,null,null);n.default=l.exports}}]);