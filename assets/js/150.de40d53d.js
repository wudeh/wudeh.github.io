(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{595:function(t,a,n){"use strict";n.r(a);var e=n(3),s=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",{attrs:{align:"center"}},[a("img",{attrs:{width:"500",src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2aaff2ce26cb44f0999d60a3224df82b~tplv-k3u1fbpfcp-zoom-1.image"}})]),t._v(" "),a("blockquote",[a("p",[t._v("对一个前端来说，没被打印折磨过的，你是最最幸福的 😭。对于我现在的中后台业务来讲，不同的浏览器兼容性，不同的业务场景，不同的设备调试，每次都要浪费巨多的时间 😭。")])]),t._v(" "),a("blockquote",[a("p",[t._v("针对个人遇到的，以及现有的一些方案对比，总结一波 😎（文末有 PPT 版本，需要留言），希望能帮助同样头疼的你")])]),t._v(" "),a("h2",{attrs:{id:"_1-浏览器打印"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-浏览器打印"}},[t._v("#")]),t._v(" 1.浏览器打印")]),t._v(" "),a("h3",{attrs:{id:"优缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点"}},[t._v("#")]),t._v(" 优缺点")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("window.print() 、document.execCommand('print’)")]),t._v(" 调用浏览器打印")]),t._v(" "),a("p",[t._v("不同浏览器的区别：在 Safari 和 Chrome 都会弹起打印预览的窗口，FireFox 和 IE 没有预览而是直接让你选择打印机")]),t._v(" "),a("p",[t._v("但是直接使用浏览器打印虽然省事，但是存在很多问题，无法满足我们的打印需求：")]),t._v(" "),a("ul",[a("li",[t._v("1、打印的是整个网页，不能打印局部内容；")]),t._v(" "),a("li",[t._v("2、打印不支持自定义分页行为，默认不支持批量打印；")]),t._v(" "),a("li",[t._v("3、打印的时候样式有问题，所见非所得；")]),t._v(" "),a("li",[t._v("4、打印可以准确识别的样式单位是绝对单位（如 pt、mm、cm），对相对单位识别不同打印机可能会得到意想不到的结果；")])]),t._v(" "),a("h3",{attrs:{id:"问题来了-如何实现局部打印-🤔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题来了-如何实现局部打印-🤔"}},[t._v("#")]),t._v(" 问题来了：如何实现局部打印？🤔")]),t._v(" "),a("h4",{attrs:{id:"_1-简单粗暴-在你不需要考虑体验-项目里面用的也比较少时-可以试试看-😆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简单粗暴-在你不需要考虑体验-项目里面用的也比较少时-可以试试看-😆"}},[t._v("#")]),t._v(" （1）简单粗暴，在你不需要考虑体验，项目里面用的也比较少时，可以试试看 😆")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('function innerHtmlPrint(){\n    // 缓存页面内容\n    const bodyHtml = window.document.body.innerHTML;\n    // 获取要打印的dom\n    const printContentHtml = document.getElementById("print").innerHTML;\n    // 替换页面内容\n    window.document.body.innerHTML = printContentHtml;\n    // 全局打印\n    window.print();\n    // 还原页面内容\n    window.document.body.innerHTML = bodyHtml;\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h4",{attrs:{id:"_2-iframe-稍微复杂点-需要将打印的内容添加到-iframe-里-然后打印整个-iframe-需要注意-往-iframe-里写一些样式的时候-一些-checkbox-radio-要特殊处理。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-iframe-稍微复杂点-需要将打印的内容添加到-iframe-里-然后打印整个-iframe-需要注意-往-iframe-里写一些样式的时候-一些-checkbox-radio-要特殊处理。"}},[t._v("#")]),t._v(" （2）iframe，稍微复杂点，需要将打印的内容添加到 iframe 里，然后打印整个 iframe，需要注意：往 iframe 里写一些样式的时候，一些 checkbox，radio 要特殊处理。")]),t._v(" "),a("p",[t._v("这里我把项目中用到的 iframe 局部打印抽出来了，各位可以直接 npm 使用 "),a("a",{attrs:{href:"https://github.com/wudeh/vue-iframe-print",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-iframe-print"),a("OutboundLink")],1),t._v(" https://github.com/wudeh/vue-iframe-print 😎😎😎")]),t._v(" "),a("p",[t._v("如果你是 vue 项目，只需要安装后，在需要打印的 dom 上加上 v-print 即可，主要实现路径如下（样式部分省略）：")]),t._v(" "),a("ul",[a("li",[t._v("创建 iframe")]),t._v(" "),a("li",[t._v("构建 iframe docTyp、 head 信息")]),t._v(" "),a("li",[t._v("获取局部 dom，插入 iframe")]),t._v(" "),a("li",[t._v("window.print()")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('   function onIframePrint(printId) {\n      const printContentHtml = document.getElementById("printId").innerHTML;\n      const iframe = document.createElement("iframe");\n      iframe.setAttribute(\n        "style",\n        "position:absolute;width:0px;height:0px;left:-500px;top:-500px;"\n      );\n      document.body.appendChild(iframe);\n      iframe.contentDocument.write(printContentHtml);\n      iframe.contentDocument.close();\n      iframe.contentWindow.print();\n      document.body.removeChild(iframe);\n    },\n\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("h3",{attrs:{id:"_3-将打印内容转为图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-将打印内容转为图片"}},[t._v("#")]),t._v(" （3）将打印内容转为图片")]),t._v(" "),a("blockquote",[a("p",[t._v("一倍清晰度模糊，可以用 2 倍 canvas。缺点：pdf 需要下载，有的产品需求需要一键打印。html2canvas 不支持 ie，兼容性也是个问题")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("function print() {\n  var target = document.getElementsByClassName(\"right-aside\")[0];\n  target.style.background = \"#FFFFFF\";\n\n  html2canvas(target, {\n    onrendered:function(canvas) {\n        var contentWidth = canvas.width;\n        var contentHeight = canvas.height;\n\n    //一页pdf显示html页面生成的canvas高度;\n    var pageHeight = contentWidth / 592.28 * 841.89;\n    //未生成pdf的html页面高度\n    var leftHeight = contentHeight;\n    //页面偏移\n    var position = 0;\n    //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高\n    var imgWidth = 595.28;\n    var imgHeight = 592.28/contentWidth * contentHeight;\n\n    var pageData = canvas.toDataURL('image/jpeg', 1.0);\n\n    var pdf = new jsPDF('', 'pt', 'a4');\n\n    //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)\n    //当内容未超过pdf一页显示的范围，无需分页\n    if (leftHeight < pageHeight) {\n    pdf.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight );\n    } else {\n        while(leftHeight > 0) {\n            pdf.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight)\n            leftHeight -= pageHeight;\n            position -= 841.89;\n            //避免添加空白页\n            if(leftHeight > 0) {\n              pdf.addPage();\n            }\n        }\n    }\n\n    pdf.save(\"content.pdf\");\n}\n  })\n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br")])]),a("h3",{attrs:{id:"pdf-转成图片-会失真-打印一定程度上会模糊-如果用的是针式打印机-打出来的东西基本不能看。👿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pdf-转成图片-会失真-打印一定程度上会模糊-如果用的是针式打印机-打出来的东西基本不能看。👿"}},[t._v("#")]),t._v(" pdf 转成图片，会失真，打印一定程度上会模糊，如果用的是针式打印机，打出来的东西基本不能看。👿")]),t._v(" "),a("p",[t._v("也是想了很久找的的解决办法（完美还原）：😬😬😬")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('  <object\n    type="application/pdf"\n    data="./滴滴出行行程报销单A.pdf"\n    width="100%"\n    height="700"\n  ></object>\n\n  <embed\n     type="application/pdf"\n     src="./滴滴出行行程报销单A.pdf"\n     width="100%"\n     height="700px"\n  />\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cfc29a3f12e478cbb4c7dec90c6ff38~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_2-插件打印"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-插件打印"}},[t._v("#")]),t._v(" 2.插件打印")]),t._v(" "),a("p",[t._v("一般是通过项目里面嵌入脚本，或者安装本地插件来完成，优缺点也都很明显")]),t._v(" "),a("p",[a("strong",[t._v("优点：")])]),t._v(" "),a("p",[t._v("1、功能强大，可以调用到系统底层的东西，比如获取系统打印机列表，设置默认打印机等")]),t._v(" "),a("p",[t._v("2、可以实现无预览打印")]),t._v(" "),a("p",[a("strong",[t._v("缺点：")])]),t._v(" "),a("p",[t._v("1、需要安装客户端，大多收费")]),t._v(" "),a("p",[t._v("2、第三方插件，无技术支持，出现问题难以解决（版本问题，chrome84 升级导致的证书问题）")]),t._v(" "),a("p",[t._v("3、本地插件的方式基本只有 window 系统版本")]),t._v(" "),a("p",[t._v("我们项目目前在使用的插件是 C-lodop，收费，现在用的"),a("strong",[t._v("注册码")]),t._v("也不知道是"),a("strong",[t._v("谁")]),t._v("在"),a("strong",[t._v("那")]),t._v("搞得 🌚。")]),t._v(" "),a("p",[t._v("如果失效，意味着我们项目的所有打印基本废了。目前来看，好像是一次购买永久有效的，"),a("strong",[t._v("先不慌")]),t._v(" 🌚")]),t._v(" "),a("p",[t._v("这里列出几个插，仅供参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.c-lodop.com/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("C-lodop"),a("OutboundLink")],1),t._v("：功能强大，兼容性不是很好，你想在保证清晰度的情况下，没办法写 css3，画个圆角边框都不行 🤧🤧🤧，依赖于系统 IE 版本，IE9 以下，打出来的东西乱七八糟。。。建议使用之前，仔细研究下官网给的 demo，这个插件的原理是，在页面嵌入一段 js，和本地客户端通过 webscoket 进行通信")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.httpprinter.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("HttpPrinter"),a("OutboundLink")],1),t._v("：和 C-lodop 差不多，可以去了解下")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://hiprint.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("HiPrint"),a("OutboundLink")],1),t._v("：不需要安装客户端，但是没有 npm 包，依赖于 jQuery")]),t._v(" "),a("h3",{attrs:{id:"打个嘴炮-😈😈😈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打个嘴炮-😈😈😈"}},[t._v("#")]),t._v(" 打个嘴炮 😈😈😈")]),t._v(" "),a("p",[t._v("其实，大家要是有时间，可以自己用 nw.js 和 electron.js 自己撸一个，这位大佬自己就搞了一个："),a("a",{attrs:{href:"https://juejin.im/post/6844903778827649032",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何通过 Nw.js 纯前端实现调用热敏打印机打印小票？"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_3-打印样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-打印样式"}},[t._v("#")]),t._v(" 3.打印样式")]),t._v(" "),a("h3",{attrs:{id:"先看下基本的页面模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先看下基本的页面模型"}},[t._v("#")]),t._v(" 先看下基本的页面模型")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/12/16/16f0d84fc49433c9?w=267&h=266&f=png&s=36609",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"media-print"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#media-print"}},[t._v("#")]),t._v(" @media print")]),t._v(" "),a("p",[a("code",[t._v("可以控制打印时的样式，仅在打印生效，可以实现一些特殊需求。")]),t._v(" "),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5fbe1b531f734ebaafc07133cc9e6e00~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#page"}},[t._v("#")]),t._v(" @page")]),t._v(" "),a("p",[a("code",[t._v("设置页面大小（A3，A4，A5）、边距（margin）、方向（ auto、landscape、portrait）等。")]),t._v(" "),a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/830b907d14694d419ba79c0ab0147844~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v(" "),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0150e4841c2f4d059b8cf9abec53b4e4~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"page-break-xxx-划重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#page-break-xxx-划重点"}},[t._v("#")]),t._v(" page-break-xxx（划重点）")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bc91383478441b9904f5b4683ba8acb~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("page-break-before( after ) 用于设置元素前( 后 )的分页行为,可取值:\n\n   * auto默认值。如果必要则在元素前插入分页符。\n   * always在元素前插入分页符。\n   * avoid避免在元素前插入分页符。\n   * left在元素之前足够的分页符，一直到一张空白的左页为止。\n   * right在元素之前足够的分页符，一直到一张空白的右页为止。\n   * inherit规定应该从父元素继承 page-break-before 属性的设置。\n\npage-break-inside设置元素内部的分页行为。取值如下:\n\n   * auto默认。如果必要则在元素内部插入分页符。\n   * avoid避免在元素内部插入分页符。\n   * inherit规定应该从父元素继承 page-break-inside 属性的设置。\n\norphans设置当元素内部发生分页时必须在页面底部保留的最少行数。\n\nwidows设置当元素内部发生分页时必须在页面顶部保留的最少行数。\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h2",{attrs:{id:"_4-云打印-node-ipp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-云打印-node-ipp"}},[t._v("#")]),t._v(" 4.云打印（node + ipp）")]),t._v(" "),a("h3",{attrs:{id:"先科普下打印机类型-🤔🤔🤔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先科普下打印机类型-🤔🤔🤔"}},[t._v("#")]),t._v(" 先科普下打印机类型 🤔🤔🤔")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53fbb27706954d09b24c2f4041c7b9b1~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v(" "),a("strong",[t._v("激光打印机")]),t._v("，办公室常见的打印机，一般用打印普通文档材料。利用激光加热将墨粉固定在纸上，从而实现打印功能。平常的耗材是墨粉，使用的纸张是普通纸，一般是打印黑白色。打印速度快 后期耗材便宜\n"),a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3444427bf38f418a8dd2bae70c3fdd2f~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v(" "),a("strong",[t._v("针式打印机")]),t._v("，一般用于打印票据，或者需要按压打印的纸张。将色带上的墨水压在纸上，从而实现打印功能。平常的耗材是色带，使用的纸张是多联纸，比起其他两个分类针式打印机可以说是元老级别的，它是是市场上较早出现的种类。主要有 9 针、24 针、72 针、144 针等多种针式打印机。其特点比较鲜明结构简单、技术成熟、性能价格比好、消耗费用低。\n"),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b6911600862494bbbe084af53c3aab2~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v(" "),a("strong",[t._v("热敏打印机")]),t._v("，使用专用纸张,靠高温显示需要打印的信息.主要用于打印小票.\n"),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24f08ca94c244fffbefc96b04fefd96d~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v(" "),a("strong",[t._v("喷墨打印机")]),t._v("，一般用于打印彩色材料。将墨水喷射在纸上，从而实现打印功能。平常的耗材是墨水，使用的纸张是普通纸，一般可以打印彩色。（另外也有一个耗材是墨盒，有些机型不必频繁更换）")]),t._v(" "),a("h3",{attrs:{id:"node-ipp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-ipp"}},[t._v("#")]),t._v(" node + ipp")]),t._v(" "),a("h4",{attrs:{id:"先了解下两个前缀概念-🤔🤔🤔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先了解下两个前缀概念-🤔🤔🤔"}},[t._v("#")]),t._v(" 先了解下两个前缀概念：🤔🤔🤔")]),t._v(" "),a("p",[a("strong",[t._v("互联网打印协议")]),t._v(" （IPP；Internet Printing Protocol）是一个在互联网上打印的标准网络协议，它容许用户可以透过互联网作遥距打印及管理打印工作等工作。用户可以透过相关界面来控制打印品所使用的纸张种类、分辨率等各种参数。")]),t._v(" "),a("p",[a("strong",[t._v("无头浏览器")]),t._v(" 指的是我们使用脚本来执行以上过程的浏览器，能模拟真实的浏览器使用场景。\nPuppeteer: "),a("a",{attrs:{href:"https://juejin.im/post/6844903504276881422",target:"_blank",rel:"noopener noreferrer"}},[t._v("无头浏览器 Puppeteer 初探 - 蚂蚁金服"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"云打印流程图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云打印流程图"}},[t._v("#")]),t._v(" 云打印流程图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/00a7035e0ea8479fabdcda93b0cfc7f3~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"目前我们组的云打印已经落地-但是存在诸多限制-使用的还不多-源码暂无开放-如有需要的同学-留言-抽空抽一下-🙄🙄🙄"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目前我们组的云打印已经落地-但是存在诸多限制-使用的还不多-源码暂无开放-如有需要的同学-留言-抽空抽一下-🙄🙄🙄"}},[t._v("#")]),t._v(" 目前我们组的云打印已经落地，但是存在诸多限制，使用的还不多，源码暂无开放，如有需要的同学，留言，抽空抽一下 🙄🙄🙄")]),t._v(" "),a("h2",{attrs:{id:"_5-一些思考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-一些思考"}},[t._v("#")]),t._v(" 5.一些思考")]),t._v(" "),a("p",[t._v("1.无特殊要求的还是建议使用 window.print() 局部打印可以使用我写的插件 "),a("a",{attrs:{href:"https://github.com/wudeh/vue-iframe-print",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-iframe-print"),a("OutboundLink")],1),t._v(" https://github.com/wudeh/vue-iframe-print 😎😎😎")]),t._v(" "),a("p",[t._v("2.看业务需求，如果是网络打印机，需要无痕打印，可以采用 node+ipp 的云打印，实现起来也不难。🕵")]),t._v(" "),a("p",[t._v("3.后端给的源文件，要求不高可以用 pdfjs 转 canvas，要求比较高用"),a("code",[t._v("<object>、<embed>")]),t._v("标签加载后端给的文件流，完美还原源文件清晰度")]),t._v(" "),a("p",[t._v("4."),a("a",{attrs:{href:"https://github.com/coolwanglu/pdf2htmlEX",target:"_blank",rel:"noopener noreferrer"}},[t._v("pdf2htmlEX 插件"),a("OutboundLink")],1),t._v("，pdf 转 html，4 年前最后一次维护，可以尝试")]),t._v(" "),a("p",[t._v("也查了很多资料，目前 web 打印这块感觉还是 window.print 比较实用，也没找到什么开源项目。哪位大佬有没有的，推荐一下的")]),t._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/6844903893038546957",target:"_blank",rel:"noopener noreferrer"}},[t._v("由打印机 TCP 协议引起的网络通讯协议深入研究：从 TCP 到万能打印、云打印"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/6844903504276881422",target:"_blank",rel:"noopener noreferrer"}},[t._v("无头浏览器 Puppeteer 初探"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/6844904164938498055",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器打印方案调研"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/83068956",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端一键打印解决方案"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.zhihu.com/question/20249686",target:"_blank",rel:"noopener noreferrer"}},[t._v("PDF 能转成 HTML 吗？如何转换？"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"ppt-截图-如有需要-可发邮箱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ppt-截图-如有需要-可发邮箱"}},[t._v("#")]),t._v(" PPT 截图，如有需要，可发邮箱")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/82889f7336c94a42b7e388a3e9ca6d42~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v(" "),a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c917e05af46e46da93451eb3614a72a5~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),t._v("\n有兴趣的可以看下我的个人博客：http://wudeh.online/ 😎😎😎")])])}),[],!1,null,null,null);a.default=s.exports}}]);