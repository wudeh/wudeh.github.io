(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{533:function(n,s,a){"use strict";a.r(s);var e=a(3),t=Object(e.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("p",[n._v("用户使用系统时获取 js 出错就会触发")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("window.addEventListener('error',(event) => {\n    if ((event.target as HTMLScriptElement).localName === 'script' || \n        (event.target as HTMLScriptElement).localName=== 'link') {\n            ElementUI.MessageBox.alert('检测到系统功能已升级，点击“确定”自动刷新获取更新'，'提示'，{\n                confirmButtonText:'确定\n                showClose: false,\n                callback: action =>{\n                    //https证书正常情况下，也就是浏览器显示安全标识才会有 caches 对象，不安全则没有\n                    if('caches'in window){\n                        caches.keys().then(function(cacheNames){\n                            console.log(cacheNames)\n                            const arr = cacheNames.map(function(cacheName){\n                                console.log(cacheName)\n                                return caches.delete(cacheName)\n                            })\n                            return arr\n                        }).then(function(res){\n                            (window as any).reloadWindow()\n                        })\n                    } else {\n                        (window as any).reloadwindow()\n                    }\n                }\n            })\n        }\n        event.preventDefault()\n}, true)\n    \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);