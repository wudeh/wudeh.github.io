(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{556:function(e,t,a){"use strict";a.r(t);var s=a(6),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("ul",[a("li",[a("p",[e._v("在 Chrome 89.0.4363.0 以及之后版本中，目标元素（at_target）的触发事件顺序不再按照注册顺序触发！而是按照先捕获再冒泡的形式依次执行！")])]),e._v(" "),a("li",[a("p",[e._v("addEventListener 的第三个参数默认是 false，在冒泡阶段（bubble）触发")])]),e._v(" "),a("li",[a("p",[e._v("阻止冒泡，e.stopPropagation")])]),e._v(" "),a("li",[a("p",[e._v("e.preventDefault() 可以阻止浏览器默认行为.比如,让a标签取消默认的跳转功能.")])]),e._v(" "),a("li",[a("p",[e._v("为了避免因为版本的不同而造成业务上的问题，我们只需要将所有目标元素代码的顺序都按照先书写捕获事件代码，再书写冒泡事件代码，就可以兼容本次的更新。")])])]),e._v(" "),a("h2",{attrs:{id:"如何识别事件是在捕获-目标对象-还有冒泡阶段进行的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何识别事件是在捕获-目标对象-还有冒泡阶段进行的"}},[e._v("#")]),e._v(" 如何识别事件是在捕获，目标对象，还有冒泡阶段进行的？")]),e._v(" "),a("p",[e._v("eventPhase  可以来识别")]),e._v(" "),a("p",[e._v("eventPhase等于0，这个时间，没有事件正在被处理")]),e._v(" "),a("p",[e._v("eventPhase等于1，捕获阶段")]),e._v(" "),a("p",[e._v("eventPhase等于2，事件处理程序处于目标对象上")]),e._v(" "),a("p",[e._v("eventPhase等于3，冒泡阶段调用的事件处理程序")]),e._v(" "),a("p",[e._v("注意：处于目标阶段时，捕获和冒泡都是 2")]),e._v(" "),a("h2",{attrs:{id:"事件注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件注册"}},[e._v("#")]),e._v(" 事件注册")]),e._v(" "),a("p",[e._v("一般使用 addEventListener 来注册事件，它接受三个参数：")]),e._v(" "),a("ul",[a("li",[e._v("字符串：处理的事件名称，如点击事件 click；")]),e._v(" "),a("li",[e._v("回调函数：事件处理程序，即要绑定的函数体；")]),e._v(" "),a("li",[e._v("指定是在事件冒泡还是事件捕获阶段处理参数，可以是布尔值，也可以是对象")]),e._v(" "),a("li",[e._v("true 则作为捕获事件处理；")]),e._v(" "),a("li",[e._v("false 则作为冒泡事件处理（默认）。")])]),e._v(" "),a("p",[e._v("第三个参数是对象时，可以使用以下几个属性：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("capture")]),e._v("：布尔值，和第三个参数作为布尔值时作用一样：false 为冒泡，true 为捕获")]),e._v(" "),a("li",[a("code",[e._v("once")]),e._v("：布尔值，值为 true 表示该回调只会调用一次，调用后会移除监听")]),e._v(" "),a("li",[a("code",[e._v("passive")]),e._v("：布尔值，表示永远不会调用 preventDefault")])]),e._v(" "),a("p",[e._v("一般来说，我们可以通过使用 stopPropagation 来阻止事件的进一步传播，即阻止事件冒泡。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// stopPropagation() 可以阻止捕获和冒泡\ne.stopPropagation();\n// stopImmediatePropagation() 也可以阻止捕获和冒泡，但主要作用是阻止监听同一事件的其他事件监听器被调用\ne.stopImmediatePropagation();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("ul",[a("li",[e._v("event.target 指向触发事件流程的元素，且不会改变。")]),e._v(" "),a("li",[e._v("this 指向的是当前所执行事件的注册元素，也就是 e.currentTarget。")]),e._v(" "),a("li",[e._v("捕获止于 event.target，冒泡始于 event.target。")]),e._v(" "),a("li",[e._v("主流浏览器都默认在冒泡阶段进行事件注册，所以，只有阻止冒泡的方法而没有阻止捕获的方法。")])]),e._v(" "),a("h2",{attrs:{id:"事件触发三阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件触发三阶段"}},[e._v("#")]),e._v(" 事件触发三阶段")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("事件捕获阶段")]),e._v("：window 往事件触发处传播，遇到注册的捕获事件会触发")]),e._v(" "),a("li",[a("code",[e._v("处于目标阶段")]),e._v("：传播到事件触发处时触发注册的事件")]),e._v(" "),a("li",[a("code",[e._v("事件冒泡阶段")]),e._v("：从事件触发处往 window 传播，遇到注册的冒泡事件会触发")])]),e._v(" "),a("p",[e._v("假设在 DOM 结构里面有 text 的这样一个标签，给这个标签绑定了一个点击事件，那么在点击这个标签的时候是怎么执行事件的呢？")]),e._v(" "),a("ul",[a("li",[e._v("首先是事件捕获阶段，会通过 window、document、body、div、text 这样的顺序一直往下捕获事件。")]),e._v(" "),a("li",[e._v("然后是处于目标阶段，到 text 标签处触发绑定的点击事件。")]),e._v(" "),a("li",[e._v("最后是事件冒泡阶段，事件是在冒泡阶段做出响应的。冒泡阶段通过 text 、div、body、document、window 这样的顺序往上冒泡，假如在 div 或者 body 上面也绑定了对应的 onclick 事件，那么会按顺序触发响应。")])]),e._v(" "),a("p",[e._v("不同浏览器中事件的触发顺序不同，有些浏览器是按照代码注册的顺序，有些是先捕获再冒泡，为了不出 "),a("code",[e._v("bug")]),e._v("，建议在书写代码的时候按照先捕获再冒泡的事件顺序来书写。")]),e._v(" "),a("h2",{attrs:{id:"事件代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件代理"}},[e._v("#")]),e._v(" 事件代理")]),e._v(" "),a("p",[e._v("如果一个节点中的子节点是动态生成的，那么子节点需要注册事件的话可以注册在父节点上。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<ul id=\"proxy\">\n  <li>主页</li>\n  <li>文章</li>\n  <li>公告</li>\n  <li>简介</li>\n</ul>\n\nlet proxy = document.querySelector('#proxy')\nproxy.addEventListener('click', (event) => {\n  let target = event.target; // 当前点击的元素\n  if (target.nodeName.toLowerCase() == 'li') {\n    console.log('click:' + target.innerHTML);\n  }\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("p",[e._v("这种方式相较于直接给目标注册事件来说，有以下优点：")]),e._v(" "),a("ul",[a("li",[e._v("可以减少内存占用，减少事件注册")]),e._v(" "),a("li",[e._v("不需要给子节点注销事件")])])])}),[],!1,null,null,null);t.default=n.exports}}]);