<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>http 1.x, 2.x, 3.0 | wudeh的学习基地</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="wudeh的学习基地是wudeh的个人博客，用于记录学习笔记、分享音乐、书籍、旅行等个人兴趣的站点。">
    <meta name="keywords" content="wudeh,wudeh的博客,博客,个人博客,vue,vuejs,vuepress,vuepress-theme-reco">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.83152043.css" as="style"><link rel="preload" href="/assets/js/app.6286b779.js" as="script"><link rel="preload" href="/assets/js/2.a83466ec.js" as="script"><link rel="preload" href="/assets/js/105.673fe302.js" as="script"><link rel="preload" href="/assets/js/4.3c113baa.js" as="script"><link rel="prefetch" href="/assets/js/10.13378cea.js"><link rel="prefetch" href="/assets/js/100.7a09c66c.js"><link rel="prefetch" href="/assets/js/101.3949b184.js"><link rel="prefetch" href="/assets/js/102.754b7798.js"><link rel="prefetch" href="/assets/js/103.ffa9a5d5.js"><link rel="prefetch" href="/assets/js/104.0880a390.js"><link rel="prefetch" href="/assets/js/106.915c4512.js"><link rel="prefetch" href="/assets/js/107.65a7f543.js"><link rel="prefetch" href="/assets/js/108.9023598c.js"><link rel="prefetch" href="/assets/js/109.2c2937c6.js"><link rel="prefetch" href="/assets/js/11.18d035bd.js"><link rel="prefetch" href="/assets/js/110.32ada25b.js"><link rel="prefetch" href="/assets/js/111.084327cf.js"><link rel="prefetch" href="/assets/js/112.9308aa02.js"><link rel="prefetch" href="/assets/js/113.d836ac31.js"><link rel="prefetch" href="/assets/js/114.f6c7d849.js"><link rel="prefetch" href="/assets/js/115.d3ff90a5.js"><link rel="prefetch" href="/assets/js/116.8e93222f.js"><link rel="prefetch" href="/assets/js/117.e73cd12f.js"><link rel="prefetch" href="/assets/js/118.46020c3f.js"><link rel="prefetch" href="/assets/js/119.95faaec8.js"><link rel="prefetch" href="/assets/js/12.ee88f477.js"><link rel="prefetch" href="/assets/js/120.3f682c85.js"><link rel="prefetch" href="/assets/js/121.e1d26448.js"><link rel="prefetch" href="/assets/js/122.ece30552.js"><link rel="prefetch" href="/assets/js/123.8189a1f2.js"><link rel="prefetch" href="/assets/js/124.71e8ee34.js"><link rel="prefetch" href="/assets/js/125.c574b583.js"><link rel="prefetch" href="/assets/js/126.5f035d15.js"><link rel="prefetch" href="/assets/js/127.12746ecd.js"><link rel="prefetch" href="/assets/js/128.f203af04.js"><link rel="prefetch" href="/assets/js/129.cb7c6fd7.js"><link rel="prefetch" href="/assets/js/13.18b6dd4e.js"><link rel="prefetch" href="/assets/js/130.c4d6a943.js"><link rel="prefetch" href="/assets/js/131.9d01af27.js"><link rel="prefetch" href="/assets/js/132.a7f55d5a.js"><link rel="prefetch" href="/assets/js/133.7e4defc1.js"><link rel="prefetch" href="/assets/js/134.b4c13a68.js"><link rel="prefetch" href="/assets/js/135.0df21a03.js"><link rel="prefetch" href="/assets/js/136.82f80fec.js"><link rel="prefetch" href="/assets/js/137.5f96f0ee.js"><link rel="prefetch" href="/assets/js/138.2eb5bf66.js"><link rel="prefetch" href="/assets/js/139.bae64186.js"><link rel="prefetch" href="/assets/js/14.15b62781.js"><link rel="prefetch" href="/assets/js/140.d848ceeb.js"><link rel="prefetch" href="/assets/js/141.69275c88.js"><link rel="prefetch" href="/assets/js/142.a2001a68.js"><link rel="prefetch" href="/assets/js/143.a244a7e4.js"><link rel="prefetch" href="/assets/js/144.f992fafc.js"><link rel="prefetch" href="/assets/js/145.91eef675.js"><link rel="prefetch" href="/assets/js/146.a9809b75.js"><link rel="prefetch" href="/assets/js/147.5608f8f3.js"><link rel="prefetch" href="/assets/js/148.04a45e64.js"><link rel="prefetch" href="/assets/js/149.b5f56760.js"><link rel="prefetch" href="/assets/js/15.3cc66b4e.js"><link rel="prefetch" href="/assets/js/150.c44be244.js"><link rel="prefetch" href="/assets/js/151.8e78583c.js"><link rel="prefetch" href="/assets/js/152.4f880d9d.js"><link rel="prefetch" href="/assets/js/153.231f731a.js"><link rel="prefetch" href="/assets/js/154.2b42336d.js"><link rel="prefetch" href="/assets/js/155.4444c519.js"><link rel="prefetch" href="/assets/js/156.eb49c4f0.js"><link rel="prefetch" href="/assets/js/157.bd4e8562.js"><link rel="prefetch" href="/assets/js/158.ac531d08.js"><link rel="prefetch" href="/assets/js/159.45ba79d2.js"><link rel="prefetch" href="/assets/js/16.06d2edd8.js"><link rel="prefetch" href="/assets/js/160.a46012b6.js"><link rel="prefetch" href="/assets/js/161.4c2ec59d.js"><link rel="prefetch" href="/assets/js/162.cd661dcc.js"><link rel="prefetch" href="/assets/js/163.9676274d.js"><link rel="prefetch" href="/assets/js/17.24e7c754.js"><link rel="prefetch" href="/assets/js/18.b7934567.js"><link rel="prefetch" href="/assets/js/19.a9e52e8c.js"><link rel="prefetch" href="/assets/js/20.13b04ee8.js"><link rel="prefetch" href="/assets/js/21.16c0393c.js"><link rel="prefetch" href="/assets/js/22.a853adb3.js"><link rel="prefetch" href="/assets/js/23.e53bff05.js"><link rel="prefetch" href="/assets/js/24.a1ac179f.js"><link rel="prefetch" href="/assets/js/25.bcd73467.js"><link rel="prefetch" href="/assets/js/26.9420eb15.js"><link rel="prefetch" href="/assets/js/27.44b9698b.js"><link rel="prefetch" href="/assets/js/28.273e01d9.js"><link rel="prefetch" href="/assets/js/29.04c54f02.js"><link rel="prefetch" href="/assets/js/3.82961a63.js"><link rel="prefetch" href="/assets/js/30.21b02c6b.js"><link rel="prefetch" href="/assets/js/31.7060634c.js"><link rel="prefetch" href="/assets/js/32.a9321f12.js"><link rel="prefetch" href="/assets/js/33.ce1299c8.js"><link rel="prefetch" href="/assets/js/34.bb55e367.js"><link rel="prefetch" href="/assets/js/35.c7dc107e.js"><link rel="prefetch" href="/assets/js/36.ff9f4c8c.js"><link rel="prefetch" href="/assets/js/37.ceadfe0e.js"><link rel="prefetch" href="/assets/js/38.5a32af51.js"><link rel="prefetch" href="/assets/js/39.161959f2.js"><link rel="prefetch" href="/assets/js/40.f695b9fa.js"><link rel="prefetch" href="/assets/js/41.1329451a.js"><link rel="prefetch" href="/assets/js/42.bdff051f.js"><link rel="prefetch" href="/assets/js/43.7680eaaa.js"><link rel="prefetch" href="/assets/js/44.3dcd0b47.js"><link rel="prefetch" href="/assets/js/45.b64e5cb4.js"><link rel="prefetch" href="/assets/js/46.f3b8af19.js"><link rel="prefetch" href="/assets/js/47.a2b1dcbf.js"><link rel="prefetch" href="/assets/js/48.0dad5ba2.js"><link rel="prefetch" href="/assets/js/49.7c5d96fc.js"><link rel="prefetch" href="/assets/js/5.af6eeaed.js"><link rel="prefetch" href="/assets/js/50.89016da0.js"><link rel="prefetch" href="/assets/js/51.ac39b9d9.js"><link rel="prefetch" href="/assets/js/52.772049d2.js"><link rel="prefetch" href="/assets/js/53.9eafd31a.js"><link rel="prefetch" href="/assets/js/54.70cc3ca2.js"><link rel="prefetch" href="/assets/js/55.0ca0e6d4.js"><link rel="prefetch" href="/assets/js/56.03f14fd0.js"><link rel="prefetch" href="/assets/js/57.9d9d27f4.js"><link rel="prefetch" href="/assets/js/58.13a61282.js"><link rel="prefetch" href="/assets/js/59.27b3d16a.js"><link rel="prefetch" href="/assets/js/6.498e687e.js"><link rel="prefetch" href="/assets/js/60.8874ed0e.js"><link rel="prefetch" href="/assets/js/61.7c6521bc.js"><link rel="prefetch" href="/assets/js/62.7df3bdf6.js"><link rel="prefetch" href="/assets/js/63.14dd7e57.js"><link rel="prefetch" href="/assets/js/64.4ab2fd69.js"><link rel="prefetch" href="/assets/js/65.5418481b.js"><link rel="prefetch" href="/assets/js/66.ec2b8dad.js"><link rel="prefetch" href="/assets/js/67.3289a4b2.js"><link rel="prefetch" href="/assets/js/68.844fbe59.js"><link rel="prefetch" href="/assets/js/69.fb08b1a4.js"><link rel="prefetch" href="/assets/js/7.cf934a46.js"><link rel="prefetch" href="/assets/js/70.26964bd7.js"><link rel="prefetch" href="/assets/js/71.c8ab55f0.js"><link rel="prefetch" href="/assets/js/72.54cc29b0.js"><link rel="prefetch" href="/assets/js/73.c1b6d07c.js"><link rel="prefetch" href="/assets/js/74.e45a794b.js"><link rel="prefetch" href="/assets/js/75.b75d80c3.js"><link rel="prefetch" href="/assets/js/76.d5c4a0e9.js"><link rel="prefetch" href="/assets/js/77.459d0f6c.js"><link rel="prefetch" href="/assets/js/78.02bf4d93.js"><link rel="prefetch" href="/assets/js/79.12597a0f.js"><link rel="prefetch" href="/assets/js/8.2ec99ff7.js"><link rel="prefetch" href="/assets/js/80.c9d54b93.js"><link rel="prefetch" href="/assets/js/81.732c05e1.js"><link rel="prefetch" href="/assets/js/82.7e6616be.js"><link rel="prefetch" href="/assets/js/83.1228d3ff.js"><link rel="prefetch" href="/assets/js/84.7e993c6e.js"><link rel="prefetch" href="/assets/js/85.6c2413dc.js"><link rel="prefetch" href="/assets/js/86.18748de2.js"><link rel="prefetch" href="/assets/js/87.14d07627.js"><link rel="prefetch" href="/assets/js/88.ca98329e.js"><link rel="prefetch" href="/assets/js/89.d5b04d54.js"><link rel="prefetch" href="/assets/js/9.08a922a9.js"><link rel="prefetch" href="/assets/js/90.1d17253c.js"><link rel="prefetch" href="/assets/js/91.21faaef0.js"><link rel="prefetch" href="/assets/js/92.ceff4556.js"><link rel="prefetch" href="/assets/js/93.b3fc7457.js"><link rel="prefetch" href="/assets/js/94.8956655a.js"><link rel="prefetch" href="/assets/js/95.846970d2.js"><link rel="prefetch" href="/assets/js/96.f71c2261.js"><link rel="prefetch" href="/assets/js/97.0443d022.js"><link rel="prefetch" href="/assets/js/98.398f8643.js"><link rel="prefetch" href="/assets/js/99.a2a7aaf5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83152043.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container value effect" data-v-4ed35bb2><!----> <div data-v-4ed35bb2><header class="navbar" data-v-4ed35bb2><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="wudeh的学习基地" class="logo"> <span class="site-name">wudeh的学习基地</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">选择模式</h4> <ul class="color-mode-options"><li class="dark">深色模式</li><li class="light active">浅色模式</li><li class="read">阅读模式</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <ul class="suggestions" style="display:none;"></ul></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i></i>前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>文档教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/docs/imooc/wiki/" class="nav-link"><i class="iconfont reco-blog"></i>慕课教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/es6/" class="nav-link"><i class="iconfont reco-blog"></i>ES6 入门教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/wangdoc/javascript/" class="nav-link"><i class="iconfont reco-blog"></i>网道-JavaScript 教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/angular/" class="nav-link"><i class="iconfont reco-blog"></i>Angular 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/react/" class="nav-link"><i class="iconfont reco-blog"></i>React 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/vue/" class="nav-link"><i class="iconfont reco-blog"></i>Vue 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/node/" class="nav-link"><i class="iconfont reco-blog"></i>Node 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/babel/" class="nav-link"><i class="iconfont reco-blog"></i>Babel 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/webpack/" class="nav-link"><i class="iconfont reco-blog"></i>Webpack 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/typescript/" class="nav-link"><i class="iconfont reco-blog"></i>TypeScript 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/runoob/" class="nav-link"><i class="iconfont reco-blog"></i>菜鸟教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/docschina/" class="nav-link"><i class="iconfont reco-blog"></i>印记中文
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>索引
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link"><i class="iconfont reco-category"></i>分类
</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>标签
</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link"><i class="iconfont reco-date"></i>归档
</a></li></ul></div></div><div class="nav-item"><a href="/bookshop/message-board/" class="nav-link"><i class="iconfont reco-suggestion"></i>留言板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>联系</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/wudeh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/bookshop/linkme/" class="nav-link"><i class="iconfont reco-account"></i>关于我
</a></li></ul></li><li class="dropdown-item"><h4>博客</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/wudeh/wudeh.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-document"></i>本站源码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://wudeh.github.io/old-blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-document"></i>老版博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bookshop/friendslink/" class="nav-link"><i class="iconfont reco-friend"></i>友情链接
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4ed35bb2></div> <aside class="sidebar" data-v-4ed35bb2><PersonalInfo data-v-4ed35bb2></PersonalInfo> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i></i>前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>文档教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/docs/imooc/wiki/" class="nav-link"><i class="iconfont reco-blog"></i>慕课教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/es6/" class="nav-link"><i class="iconfont reco-blog"></i>ES6 入门教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/wangdoc/javascript/" class="nav-link"><i class="iconfont reco-blog"></i>网道-JavaScript 教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/angular/" class="nav-link"><i class="iconfont reco-blog"></i>Angular 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/react/" class="nav-link"><i class="iconfont reco-blog"></i>React 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/vue/" class="nav-link"><i class="iconfont reco-blog"></i>Vue 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/node/" class="nav-link"><i class="iconfont reco-blog"></i>Node 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/babel/" class="nav-link"><i class="iconfont reco-blog"></i>Babel 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/webpack/" class="nav-link"><i class="iconfont reco-blog"></i>Webpack 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/typescript/" class="nav-link"><i class="iconfont reco-blog"></i>TypeScript 文档
</a></li><li class="dropdown-subitem"><a href="/web/docs/runoob/" class="nav-link"><i class="iconfont reco-blog"></i>菜鸟教程
</a></li><li class="dropdown-subitem"><a href="/web/docs/docschina/" class="nav-link"><i class="iconfont reco-blog"></i>印记中文
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>索引
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link"><i class="iconfont reco-category"></i>分类
</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>标签
</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link"><i class="iconfont reco-date"></i>归档
</a></li></ul></div></div><div class="nav-item"><a href="/bookshop/message-board/" class="nav-link"><i class="iconfont reco-suggestion"></i>留言板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>联系</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/wudeh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/bookshop/linkme/" class="nav-link"><i class="iconfont reco-account"></i>关于我
</a></li></ul></li><li class="dropdown-item"><h4>博客</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/wudeh/wudeh.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-document"></i>本站源码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://wudeh.github.io/old-blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-document"></i>老版博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bookshop/friendslink/" class="nav-link"><i class="iconfont reco-friend"></i>友情链接
</a></li></ul></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/pages/fe8b749eac6ac/" class="sidebar-link">浏览器渲染过程与性能优化</a></li><li><a href="/pages/c60b6dbcf5e5a/" class="sidebar-link">get 和 post 的区别</a></li><li><a href="/pages/05263678f5475/" class="sidebar-link">为什么TCP要三次握手而不是两次</a></li><li><a href="/pages/49e2a780662e9/" class="sidebar-link">拯救你的年底KPI：前端性能优化</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span></span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-4"><div class="articleInfo-wrap" data-v-13f19dad><div class="articleInfo" data-v-13f19dad><ul class="breadcrumbs" data-v-13f19dad><li data-v-13f19dad><a href="/" title="首页" class="fa fa-laptop-house router-link-active" data-v-13f19dad></a></li> <li data-v-13f19dad><a href="/categories/?category=%E6%B5%8F%E8%A7%88%E5%99%A8%26%E7%BD%91%E7%BB%9C" title="分类" data-v-13f19dad>浏览器&amp;网络</a></li> <!----> <!----></ul> <div class="info" data-v-13f19dad><div title="作者" class="author fa fa-user" data-v-13f19dad><a href="javascript:;" data-v-13f19dad>wudeh</a></div> <div title="创建时间" class="date fa fa-calendar-alt" data-v-13f19dad><a href="javascript:;" data-v-13f19dad>2021/07/09 00:00:00</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
            http 1.x, 2.x, 3.0
          </h1> <div class="theme-vdoing-content content__default"><h2 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h2> <p>超文本传输协议，「HTTP 是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范」。</p> <h2 id="_0-9"><a href="#_0-9" class="header-anchor">#</a> 0.9</h2> <p>1991 年,原型版本，功能简陋，只有一个命令 GET,只支持纯文本内容，该版本已过时。</p> <h2 id="_1-0"><a href="#_1-0" class="header-anchor">#</a> 1.0</h2> <ul><li>任何格式的内容都可以发送，这使得互联网不仅可以传输文字，还能传输图像、视频、二进制等文件。</li> <li>除了 GET 命令，还引入了 POST 命令和 HEAD 命令。</li> <li>http 请求和回应的格式改变，除了数据部分，每次通信都必须包括头信息（HTTP header），用来描述一些元数据。</li> <li>只使用 header 中的 If-Modified-Since 和 Expires 作为缓存失效的标准。</li> <li>不支持断点续传，也就是说，每次都会传送全部的页面和数据。通常每台计算机只能绑定一个 IP，所以请求消息中的 URL 并没有传递主机名（hostname）</li></ul> <h2 id="_1-1"><a href="#_1-1" class="header-anchor">#</a> 1.1</h2> <p>目前最为主流的 http 协议版本，从 1999 年发布至今，仍是主流的 http 协议版本。</p> <ul><li>引入了持久连接（ persistent connection），即 TCP 连接默认不关闭，可以被多个请求复用，不用声明 Connection: keep-alive。长连接的连接时长可以通过请求头中的 keep-alive 来设置。</li> <li>引入了管道机制（ pipelining），即在同一个 TCP 连接里，客户端可以同时发送多个
请求，进一步改进了 HTTP 协议的效率。</li> <li>HTTP 1.1 中新增加了 E-tag，If-Unmodified-Since, If-Match, If-None-Match 等缓存控制标头来控制缓存失效。支持断点续传，通过使用请求头中的 Range 来实现。</li> <li>使用了虚拟网络，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个 IP 地址。</li> <li>新增方法：PUT、 PATCH、 OPTIONS、 DELETE。</li> <li>增加 Host 字段、支持断点传输等</li></ul> <h2 id="_1-x-版本问题"><a href="#_1-x-版本问题" class="header-anchor">#</a> 1.x 版本问题</h2> <ul><li>数据明文：在传输数据过程中，所有内容都是明文，客户端和服务器端都无法验证对方的身份，无法保证数据的安全性。</li> <li>队头阻塞：HTTP/1.1 版本默认允许复用 TCP 连接，但是在同一个 TCP 连接里，所有数据通信是按次序进行的，服务器通常在处理完一个回应后，才会继续去处理下一个，这样子就会造成队头阻塞。</li> <li>http/1.x 版本支持 Keep-alive，用此方案来弥补创建多次连接产生的延迟，但是同样会给服务器带来压力，并且的话，对于单文件被不断请求的服务，Keep-alive 会极大影响性能，因为它在文件被请求之后还保持了不必要的连接很长时间。</li></ul> <h3 id="解决-http-队头阻塞的方法"><a href="#解决-http-队头阻塞的方法" class="header-anchor">#</a> 解决 HTTP 队头阻塞的方法</h3> <ul><li>并发连接：对于一个域名而言，是允许分配多个长连接的，那么可以理解成增加了任务队列，也就是说不会导致一个任务阻塞了该任务队列的其他任务，在 RFC 规范中规定客户端最多并发 2 个连接，不过实际情况就是要比这个还要多，举个例子，Chrome 中是 6 个。</li> <li>域名分片：可以在一个域名下分出多个二级域名出来，而它们最终指向的还是同一个服务器，这样子的话就可以并发处理的任务队列更多，也更好的解决了队头阻塞的问题。
举个例子，比如 aaa.com，可以分出很多二级域名，比如 Day1.aaa.com，Day2.aaa.com,Day3.aaa.com,这样子就可以有效解决队头阻塞问题。</li></ul> <h2 id="_2-0"><a href="#_2-0" class="header-anchor">#</a> 2.0</h2> <h3 id="头部压缩"><a href="#头部压缩" class="header-anchor">#</a> 头部压缩</h3> <ul><li><code>头部压缩</code>：HTTP 1.1 版本会出现 「User-Agent、Cookie、Accept、Server、Range」 等字段可能会占用几百甚至几千字节，而 Body 却经常只有几十字节，所以导致头部偏重。HTTP 2.0 使用 <code>HPACK</code> 算法进行压缩。<code>HPACK</code> 算法原理：</li> <li><code>索引表</code>：对头部信息建立索引表，每个索引对应一个值，比如索引为 2 对应头部中的 method 头部信息，这样子的话，在传输的时候，不在是传输对应的头部信息了，而是传递索引，对于之前出现过的头部信息，只需要把「索引」(比如 1，2，...)传给对方即可，对方拿到索引查表就行了。这种「传索引」的方式，可以说让请求头字段得到极大程度的精简和复用。</li> <li><code>哈夫曼编码</code>：对于整数和字符串进行「哈夫曼编码」，哈夫曼编码的原理就是先将所有出现的字符建立一张索引表，然后让出现次数多的字符对应的索引尽可能短，传输的时候也是传输这样的「索引序列」，可以达到非常高的压缩率。</li></ul> <h3 id="多路复用"><a href="#多路复用" class="header-anchor">#</a> 多路复用</h3> <p>HTTP 1.x 中，如果想并发多个请求，必须使用多个 TCP 链接，且浏览器为了控制资源，还会对单个域名有 6-8 个的 TCP 链接请求限制。
HTTP2 中：</p> <blockquote><p>同域名下所有通信都在单个连接上完成。单个连接可以承载任意数量的双向数据流。数据流以消息的形式发送，而消息又由一个或多个帧组成，多个帧之间可以乱序发送，因为根据帧首部的流标识可以重新组装，也就是 Stream ID，流标识符，有了它，接收方就能从乱序的二进制帧中选择 ID 相同的帧，按照顺序组装成请求/响应报文。</p></blockquote> <p>注意：HTTP2.0 协议的多路复用机制解决了 HTTP 层的队头阻塞问题，但是在 TCP 层仍然存在队头阻塞问题。</p> <h3 id="服务器推送"><a href="#服务器推送" class="header-anchor">#</a> 服务器推送</h3> <p>浏览器发送一个请求，服务器主动向浏览器推送与这个请求相关的资源，这样浏览器就不用发起后续请求。</p> <p>相比较 http/1.1 的优势 👇</p> <ul><li>推送资源可以由不同页面共享</li> <li>服务器可以按照优先级推送资源</li> <li>客户端可以缓存推送的资源</li> <li>客户端可以拒收推送过来的资源</li></ul> <p>和 websocket 的区别</p> <ul><li>HTTP2 的推送是浏览器和服务端之间的一个推送的概念，比如在 HTTP2 中请求 a.html 服务端会自动把 css 和一些其他资源一并返回，</li> <li>websocket 的推送是有 API 的，可以在客户端手动控制的，这就是区别。</li></ul> <p>另外需要补充的是,服务端可以主动推送，客户端也有权利选择是否接收。如果服务端推送的资源已经被浏览器缓存过，浏览器可以通过发送 RST_STREAM 帧来拒收。主动推送也遵守同源策略，换句话说，服务器不能随便将第三方资源推送给客户端，而必须是经过双方确认才行。</p> <p>Push Cache（推送缓存）是针对 HTTP/2 标准下的推送资源设定的 ，是浏览器缓存的最后一道缓存机制，是在设置了 Last-Modifed 但没有设置 Cache-Control 或者 Expires 时触发，也就是只拿到最后更新时间，但没有设置过期时间，这种情况下浏览器会有一个默认的缓存策略 push cache，自动设置过期时间：(Date - Last-Modified)*0.1，也就是当前时间减去最后更新时间后再乘 10%。</p> <p>这种策略只在会话 session 中存在，会话结束就被释放了。</p> <p>这种策略也有个弊端，假设 session 存在的时间够长，如果该资源是在一个月前更新的，那么它再次更新的话用户只能在 3 天后才能拿到新资源。</p> <p>推送缓存是 session 级别的，如果用户的 session 结束则资源被释放；即使 URL 相同但处于不同的 session 中也不会发生匹配。推送缓存的存储时间较短，Chromium 浏览器中只有 5 分钟左右，同时它也并非严格执行 HTTP 头中的缓存指令</p> <ul><li><p>几乎所有的资源都能被推送，并且能够被缓存。测试过程是作者在推送资源之后尝试用 fetch()、XMLHttpRequest、<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;…&quot;&gt;、&lt;script src=&quot;…&quot;&gt;、&lt;iframe src=&quot;…&quot;&gt;</code>获取推送的资源。Edge 和 Safari 浏览器支持相对比较差</p></li> <li><p>no-cache 和 no-store 资源也能被推送</p></li> <li><p>多个页面可以使用同一个 HTTP/2 的连接，也就可以使用同一个 Push Cache。这主要还是依赖浏览器的实现而定，出于对性能的考虑有的浏览器会对相同域名但不同的 tab 标签使用同一个 HTTP 连接。</p></li> <li><p>一旦 Push Cache 中的资源被使用即被移除</p></li> <li><p>如果 Push Cache 或者 HTTP Cache 已经存在被推送的资源，则有可能浏览器拒绝推送</p></li> <li><p>可以为其他域名推送资源</p></li></ul> <h3 id="二进制分帧"><a href="#二进制分帧" class="header-anchor">#</a> 二进制分帧</h3> <ul><li>之前是明文传输，不方便计算机解析，对于回车换行符来说到底是内容还是分隔符，都需要内部状态机去识别，这样子效率低，HTTP/2 采用二进制格式，全部传输 01 串，便于机器解码。</li> <li>这样子一个报文格式就被拆分为一个个二进制帧，用「Headers 帧」存放头部字段，「Data 帧」存放请求体数据。这样子的话，就是一堆乱序的二进制帧，它们不存在先后关系，因此不需要排队等待，解决了 HTTP 队头阻塞问题。</li> <li>在客户端与服务器之间，双方都可以互相发送二进制帧，这样子「双向传输的序列」，称为流，所以 HTTP/2 中以流来表示一个 TCP 连接上进行多个数据帧的通信，这就是多路复用概念。</li></ul> <p>流传输的特性:</p> <ul><li>并发性。一个 HTTP/2 连接上可以同时发多个帧，这一点和 HTTP/1 不同。这也是实现多路复用的基础。</li> <li>自增性。流 ID 是不可重用的，而是会按顺序递增，达到上限之后又新开 TCP 连接从头开始。</li> <li>双向性。客户端和服务端都可以创建流，互不干扰，双方都可以作为发送方或者接收方。</li> <li>可设置优先级。可以设置数据帧的优先级，让服务端先处理重要资源，优化用户体验。</li></ul> <p>那乱序的二进制帧，是如何组装成正确的报文呢？</p> <ul><li>所谓的乱序，值的是不同 ID 的 Stream 是乱序的，对于同一个 Stream ID 的帧是按顺序传输的。</li> <li>接收方收到二进制帧后，将相同的 Stream ID 组装成完整的请求报文和响应报文。</li> <li>二进制帧中有一些字段，控制着优先级和流量控制等功能，这样子的话，就可以设置数据帧的优先级，让服务器处理重要资源，优化用户体验。</li></ul> <h3 id="http2-0-之后以前不必要的优化"><a href="#http2-0-之后以前不必要的优化" class="header-anchor">#</a> HTTP2.0 之后以前不必要的优化</h3> <p>取消合并资源</p> <ul><li>在 HTTP/1.1 中要把多个小资源合并成一个大资源，从而减少请求。而在 HTTP/2 就不需要了，因为 HTTP/2 所有的请求都可以在一个 TCP 连接发送。</li></ul> <p>取消域名拆分</p> <ul><li>取消域名拆分的理由同上，再多的 HTTP 请求都可以在一个 TCP 连接上发送，所以不需要采取多个域名来突破浏览器 TCP 连接数限制这一规则了。</li></ul> <h2 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h2> <p>HTTPS = HTTP + SSL/TLS</p> <p>基于现在 TLS 主流版本是 1.2，所以接下来梳理的是「TLS/1.2 握手过程」。</p> <h3 id="对称加密"><a href="#对称加密" class="header-anchor">#</a> 对称加密</h3> <p>加密和解密用同一个秘钥的加密方式叫做对称加密。Client 客户端和 Server 端共用一套密钥</p> <h3 id="非对称加密"><a href="#非对称加密" class="header-anchor">#</a> 非对称加密</h3> <p>采用的算法是 RSA，所以在一些文章中也会看见「传统 RSA 握手」，基于现在 TLS 主流版本是 1.2，所以接下来梳理的是「TLS/1.2 握手过程」。</p> <p>非对称加密中，我们需要明确的点是 👇</p> <ul><li>有一对秘钥，「公钥」和「私钥」。</li> <li>公钥加密的内容，只有私钥可以解开，私钥加密的内容，所有的公钥都可以解开，这里说的「公钥都可以解开，指的是一对秘钥」。</li> <li>公钥可以发送给所有的客户端，私钥只保存在服务器端。</li></ul> <h3 id="数字签名"><a href="#数字签名" class="header-anchor">#</a> 数字签名</h3> <ul><li>将网站的信息，通过特定的算法加密后形成数字签名</li> <li>数字签名在客户端和服务端都会生成，两个数字签名的比对结果将决定浏览器是否信任数字证书</li></ul> <h3 id="数字证书"><a href="#数字证书" class="header-anchor">#</a> 数字证书</h3> <ul><li>服务端生成数字签名后，用第三方机构的私钥对数字签名进行加密，再加上非对称算法的公钥，就是数字证书</li> <li>数字证书 = 非对称加密的公钥 + 三方机构加密后的数字签名</li></ul> <h3 id="ssl-连接断开后如何恢复"><a href="#ssl-连接断开后如何恢复" class="header-anchor">#</a> SSL 连接断开后如何恢复？</h3> <p>有两种方法来恢复断开的 SSL 连接，一种是使用 session ID，一种是 session ticket。</p> <ul><li><p>使用 session ID 的方式，每一次的会话都有一个编号，当对话中断后，下一次重新连接时，只要客户端给出这个编号，服务器如果有这个编号的记录，那么双方就可以继续使用以前的秘钥，而不用重新生成一把。目前所有的浏览器都支持这一种方法。但是这种方法有一个缺点是，session ID 只能够存在一台服务器上，如果我们的请求通过负载平衡被转移到了其他的服务器上，那么就无法恢复对话。</p></li> <li><p>另一种方式是 session ticket 的方式，session ticket 是服务器在上一次对话中发送给客户的，这个 ticket 是加密的，只有服务器能够解密，里面包含了本次会话的信息，比如对话秘钥和加密方法等。这样不管我们的请求是否转移到其他的服务器上，当服务器将 ticket 解密以后，就能够获取上次对话的信息，就不用重新生成对话秘钥了。</p></li></ul> <h3 id="https-加密流程"><a href="#https-加密流程" class="header-anchor">#</a> HTTPS 加密流程</h3> <ul><li>1.浏览器发起一个 HTTPS 请求，连接 443 端口。这个过程可以理解成是「请求公钥的过程」。给出协议版本号、一个客户端生成的随机数（Client random），以及客户端支持的加密方法。</li> <li>2.服务端收到请求后，将证书中部分数据信息用 Hash 算法生成消息摘要，通过第三方机构私钥加密消息摘要，生成数字签名，会把数字证书（非对称公钥 + 数字签名 + 发布机构<code>CA</code> + 证书有效期 等等）发送给浏览器。以及一个服务器生成的随机数</li> <li>3.浏览器查找操作系统中的证书发布机构 <code>CA</code>，和服务器发来的证书中的颁发者 <code>CA</code> 作比对，校验证书是否为合法机构颁发；如果为合法证书，浏览器通过第三方机构的公钥对数字签名进行解密，得到消息摘要；浏览器通过 <code>Hash</code> 算法根据证书内容信息生成消息摘要，两个消息摘要进行比对，比对成功则信任该数字证书，得到非对称加密算法的公钥；</li> <li>4.生成一个新的随机数（Premaster secret），并使用数字证书中的非对称公钥，加密这个随机数，发给服务端，同时根据三个随机数生成对称密钥，发送给服务端</li> <li>5.服务端使用非对称加密的私钥，解密获取客户端发来的随机数（即 Premaster secret），同时根据三个随机数生成对称密钥。服务器握手结束通知，表示服务器的握手阶段已经结束。这一项同时也是前面发送的所有内容的 hash 值，用来供客户端校验。</li> <li>接下来，就可以通过该对称密钥对传输的信息加密/解密啦</li></ul> <h2 id="http-3-0"><a href="#http-3-0" class="header-anchor">#</a> HTTP 3.0</h2> <p>HTTP3.0 又称为 HTTP Over QUIC，其弃用 TCP 协议，改为使用基于 UDP 协议的 QUIC 协议来实现。</p> <ul><li>HTTP3.0 既然选择了 QUIC 协议，也就意味着 HTTP3.0 基本继承了 HTTP2.0 的强大功能，并且进一步解决了 HTTP2.0 存在的一些问题，同时必然引入了新的问题。</li></ul> <h3 id="实现了类似-tcp-的流量控制、传输可靠性的功能"><a href="#实现了类似-tcp-的流量控制、传输可靠性的功能" class="header-anchor">#</a> 实现了类似 TCP 的流量控制、传输可靠性的功能</h3> <p>虽然 UDP 不提供可靠性的传输，但 QUIC 在 UDP 的基础之上增加了一层来保证数据可靠性传输。它提供了数据包重传、拥塞控制以及其他一些 TCP 中存在的特性。
QUIC 协议到底改进在哪些方面呢？主要有如下几点：</p> <ul><li>可插拔 — 应用程序层面就能实现不同的拥塞控制算法。</li> <li>单调递增的 Packet Number — 使用 Packet Number 代替了 TCP 的 seq。</li> <li>不允许 Reneging — 一个 Packet 只要被 Ack，就认为它一定被正确接收。</li> <li>前向纠错（FEC）</li> <li>更多的 Ack 块和增加 Ack Delay 时间。</li> <li>基于 stream 和 connection 级别的流量控制。</li></ul> <h3 id="实现了快速握手功能"><a href="#实现了快速握手功能" class="header-anchor">#</a> 实现了快速握手功能</h3> <p>由于 QUIC 是基于 UDP 的，所以 QUIC 可以实现使用 0-RTT 或者 1-RTT 来建立连接，这意味着 QUIC 可以用最快的速度来发送和接收数据，这样可以大大提升首次打开页面的速度。0RTT 建连可以说是 QUIC 相比 HTTP2 最大的性能优势。</p> <h3 id="集成了-tls-加密功能"><a href="#集成了-tls-加密功能" class="header-anchor">#</a> 集成了 TLS 加密功能</h3> <p>目前 QUIC 使用的是 TLS1.3，相较于早期版本 TLS1.3 有更多的优点，其中最重要的一点是减少了握手所花费的 RTT 个数。
在完全握手情况下，需要 1-RTT 建立连接。 TLS1.3 恢复会话可以直接发送加密后的应用数据，不需要额外的 TLS 握手，也就是 0-RTT。
但是 TLS1.3 也并不完美。TLS 1.3 的 0-RTT 无法保证前向安全性(Forward secrecy)。简单讲就是，如果当攻击者通过某种手段获取到了 Session Ticket Key，那么该攻击者可以解密以前的加密数据。
要缓解该问题可以通过设置使得与 Session Ticket Key 相关的 DH 静态参数在短时间内过期（一般几个小时）。</p> <h3 id="多路复用-彻底解决-tcp-中队头阻塞的问题"><a href="#多路复用-彻底解决-tcp-中队头阻塞的问题" class="header-anchor">#</a> 多路复用，彻底解决 TCP 中队头阻塞的问题</h3> <p>和 TCP 不同，QUIC 实现了在同一物理连接上可以有多个独立的逻辑数据流。实现了数据流的单独传输，就解决了 TCP 中队头阻塞的问题。</p> <h3 id="连接迁移"><a href="#连接迁移" class="header-anchor">#</a> 连接迁移</h3> <p>TCP 是按照 4 要素（客户端 IP、端口, 服务器 IP、端口）确定一个连接的。而 QUIC 则是让客户端生成一个 Connection ID （64 位）来区别不同连接。只要 Connection ID 不变，连接就不需要重新建立，即便是客户端的网络发生变化。由于迁移客户端继续使用相同的会话密钥来加密和解密数据包，QUIC 还提供了迁移客户端的自动加密验证。</p> <h3 id="队头阻塞问题"><a href="#队头阻塞问题" class="header-anchor">#</a> 队头阻塞问题</h3> <ul><li><p>队头阻塞 Head-of-line blocking(缩写为 HOL blocking)是计算机网络中是一种性能受限的现象，通俗来说就是：一个数据包影响了一堆数据包，它不来大家都走不了。</p></li> <li><p>队头阻塞问题可能存在于 HTTP 层和 TCP 层，在 HTTP1.x 时两个层次都存在该问题。</p></li> <li><p>HTTP2.0 协议的多路复用机制解决了 HTTP 层的队头阻塞问题，但是在 TCP 层仍然存在队头阻塞问题。</p></li> <li><p>TCP 协议在收到数据包之后，这部分数据可能是乱序到达的，但是 TCP 必须将所有数据收集排序整合后给上层使用，如果其中某个包丢失了，就必须等待重传，从而出现某个丢包数据阻塞整个连接的数据使用。</p></li> <li><p>QUIC 协议是基于 UDP 协议实现的，在一条链接上可以有多个流，流与流之间是互不影响的，当一个流出现丢包影响范围非常小，从而解决队头阻塞问题。</p></li></ul> <h3 id="连接迁移-2"><a href="#连接迁移-2" class="header-anchor">#</a> 连接迁移</h3> <p>网络切换几乎无时无刻不在发生。</p> <p>TCP 协议使用五元组来表示一条唯一的连接，当我们从 4G 环境切换到 wifi 环境时，手机的 IP 地址就会发生变化，这时必须创建新的 TCP 连接才能继续传输数据。</p> <p>QUIC 协议基于 UDP 实现摒弃了五元组的概念，使用 64 位的随机数作为连接的 ID，并使用该 ID 表示连接。</p> <p>基于 QUIC 协议之下，我们在日常 wifi 和 4G 切换时，或者不同基站之间切换都不会重连，从而提高业务层的体验。</p> <h3 id="丢包重传"><a href="#丢包重传" class="header-anchor">#</a> 丢包重传</h3> <p>HTTP/2 主要的问题在于，多个 HTTP 请求在复用一个 TCP 连接，下层的 TCP 协议是不知道有多少个 HTTP 请求的。所以一旦发生了丢包现象，就会触发 TCP 的重传机制，这样在一个 TCP 连接中的所有的 HTTP 请求都必须等待这个丢了的包被重传回来。</p> <ul><li>HTTP/2 多请求复用一个 TCP 连接，一旦发生丢包，就会阻塞住所有的 HTTP 请求。</li></ul> <p>这都是基于 TCP 传输层的问题，所以 HTTP/3 把 HTTP 下层的 TCP 协议改成了 UDP！UDP 发生是不管顺序，也不管丢包的，所以不会出现 HTTP/1.1 的队头阻塞 和 HTTP/2 的一个丢包全部重传问题。</p> <p>UDP 是不可靠传输的，但基于 UDP 的 QUIC 协议 可以实现类似 TCP 的可靠性传输。</p> <ul><li>QUIC 有自己的一套机制可以保证传输的可靠性的。当某个流发生丢包时，只会阻塞这个流，其他流不会受到影响。</li> <li>TL3 升级成了最新的 1.3 版本，头部压缩算法也升级成了 QPack。</li> <li>HTTPS 要建立一个连接，要花费 6 次交互，先是建立三次握手，然后是 TLS/1.3 的三次握手。QUIC 直接把以往的 TCP 和 TLS/1.3 的 6 次交互合并成了 3 次，减少了交互次数。</li></ul> <h2 id="短轮询、长轮询和-websocket"><a href="#短轮询、长轮询和-websocket" class="header-anchor">#</a> 短轮询、长轮询和 WebSocket</h2> <p>短轮询的基本思路:</p> <ul><li>浏览器每隔一段时间向浏览器发送 http 请求，服务器端在收到请求后，不论是否有数据更新，都直接进行
响应。这种方式实现的即时通信，本质上还是浏览器发送请求，服务器接受请求的一个过程，通过让客户端不断的进行请求，使得客户端能够模拟实时地收到服务器端的数据的变化。</li></ul> <p>优缺点 👇</p> <ul><li>优点是比较简单，易于理解。</li> <li>缺点是这种方式由于需要不断的建立 http 连接，严重浪费了服务器端和客户端的资源。当用户增加时，服务器端的压力就会变大，这是很不合理的。</li></ul> <p>长轮询
长轮询的基本思路:</p> <ul><li>首先由客户端向服务器发起请求，当服务器收到客户端发来的请求后，服务器端不会直接进行响应，而是先将
这个请求挂起，然后判断服务器端数据是否有更新。</li> <li>如果有更新，则进行响应，如果一直没有数据，则到达一定的时间限制才返回。客户端 JavaScript 响应处理函数会在处理完服务器返回的信息后，再次发出请求，重新建立连接。</li></ul> <p>优缺点 👇</p> <ul><li>长轮询和短轮询比起来，它的优点是「明显减少了很多不必要的 http 请求次数」，相比之下节约了资源。</li> <li>长轮询的缺点在于，连接挂起也会导致资源的浪费。</li></ul> <p>WebSocket</p> <ul><li>WebSocket 是 Html5 定义的一个新协议，与传统的 http 协议不同，该协议允许由服务器主动的向客户端推送信息。使用 WebSocket 协议的缺点是在服务器端的配置比较复杂。</li> <li>WebSocket 是一个全双工的协议，也就是通信双方是平等的，可以相互发送消息。</li></ul> <h2 id="正向代理和反向代理"><a href="#正向代理和反向代理" class="header-anchor">#</a> 正向代理和反向代理</h2> <h3 id="正向代理"><a href="#正向代理" class="header-anchor">#</a> 正向代理</h3> <p>我们常说的代理也就是指正向代理，正向代理的过程，它隐藏了真实的请求客户端，服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求。</p> <h3 id="反向代理"><a href="#反向代理" class="header-anchor">#</a> 反向代理</h3> <p>这种代理模式下，它隐藏了真实的服务端，当我们向一个网站发起请求的时候，背后可能有成千上万台服务器为我们服务，具体是哪一台，我们不清楚，我们只需要知道反向代理服务器是谁就行，而且反向代理服务器会帮我们把请求转发到真实的服务器那里去，一般而言反向代理服务器一般用来实现负载平衡。</p> <h2 id="负载平衡的两种实现方式"><a href="#负载平衡的两种实现方式" class="header-anchor">#</a> 负载平衡的两种实现方式</h2> <ul><li><p>一种是使用反向代理的方式，用户的请求都发送到反向代理服务上，然后由反向代理服务器来转发请求到真实的服务器上，以此来实现集群的负载平衡。</p></li> <li><p>另一种是 DNS 的方式，DNS 可以用于在冗余的服务器上实现负载平衡。因为现在一般的大型网站使用多台服务器提供服务，因此一个域名可能会对应多个服务器地址。当用户向网站域名请求的时候，DNS 服务器返回这个域名所对应的服务器 IP 地址的集合，但在每个回答中，会循环这些 IP 地址的顺序，用户一般会选择排在前面的地址发送请求。以此将用户的请求均衡的分配到各个不同的服务器上，这样来实现负载均衡。这种方式有一个缺点就是，由于 DNS 服务器中存在缓存，所以有可能一个服务器出现故障后，域名解析仍然返回的是那个 IP 地址，就会造成访问的问题。</p></li></ul></div></div> <div class="page-edit"><div class="tags"><a href="/tags/?tag=%E7%BD%91%E7%BB%9C" title="标签">#网络</a></div> <div class="last-updated"><span class="prefix">最近更新时间：</span> <span class="time">2022/09/28 08:26:36</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="theme-vdoing-wrapper article-list bg-style-4"><div class="article-title"><a href="/archives/" class="fa fa-pencil-alt">
      最近更新
    </a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><div><a href="/pages/cbeafe6f1490e/"><div>什么是 MCP</div></a></div> <div class="date"><span>2025/05/01 00:00:00</span></div></dt></dl><dl><dd>02</dd> <dt><div><a href="/pages/0b0e1b463ac7/"><div>一些小知识</div></a></div> <div class="date"><span>2022/09/01 00:00:00</span></div></dt></dl><dl><dd>03</dd> <dt><div><a href="/pages/cb81e4c5ca43f/"><div>严格判断文件上传类型</div></a></div> <div class="date"><span>2022/09/01 00:00:00</span></div></dt></dl> <div class="more-box"><a href="/archives/" class="more"><i class="fas fa-angle-double-right"></i>前往更多 ...
      </a></div></div></div> <div class="comments-wrapper" style="display:none;"><!----></div></main></div> <div class="footer-wrapper" data-v-47e9d8a4 data-v-47e9d8a4><span class="footer-reco-theme" data-v-47e9d8a4><i class="iconfont reco-github" data-v-47e9d8a4></i> <a target="blank" href="https://github.com/wudeh/wudeh.github.io" data-v-47e9d8a4>wudeh.github.io@5.0</a></span> <!----> <span class="footer-copyright" data-v-47e9d8a4><i class="iconfont reco-copyright" data-v-47e9d8a4></i> <a data-v-47e9d8a4><span data-v-47e9d8a4>wudeh</span> <span class="ml5" data-v-47e9d8a4> 2018 - 2025 </span></a></span> <span class="footer-view-site" data-v-47e9d8a4><i class="iconfont reco-eye" data-v-47e9d8a4></i> <span id="busuanzi_container_site_uv" data-v-47e9d8a4> 访客数：<span id="busuanzi_value_site_uv" class="num" data-v-47e9d8a4>-</span></span> <span id="busuanzi_container_site_pv" class="ml5" data-v-47e9d8a4> 访问量：<span id="busuanzi_value_site_pv" class="num" data-v-47e9d8a4>-</span></span></span> <!----></div> <!----></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div><!----><div></div></div></div>
    <script src="/assets/js/app.6286b779.js" defer></script><script src="/assets/js/2.a83466ec.js" defer></script><script src="/assets/js/105.673fe302.js" defer></script><script src="/assets/js/4.3c113baa.js" defer></script>
  </body>
</html>
